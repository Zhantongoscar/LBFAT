# 开发规范

## 1. 项目结构
```
projectroot/
├── backend/           # 后端服务
│   ├── src/          # 源代码
│   ├── Dockerfile    # 后端Docker配置
│   └── package.json  # 依赖配置
├── frontend/         # 前端服务
│   └── Dockerfile    # 前端Docker配置
├── docker/           # Docker相关配置
│   ├── mysql/        # MySQL配置
│   │   └── init.sql  # 数据库初始化脚本
│   └── emqx/         # EMQX配置
└── docker-compose.yml # Docker编排配置
```

## 2. 代码规范

### 2.1 命名规范
- 文件名：小写字母，单词间用连字符（-）分隔
- 变量名：驼峰命名法
- 常量：大写字母，单词间用下划线（_）分隔
- 类名：首字母大写的驼峰命名法

### 2.2 注释规范
- 文件头部必须包含文件说明
- 函数必须包含功能说明、参数说明和返回值说明
- 复杂逻辑必须添加行内注释

### 2.3 Git提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式调整
- refactor: 重构
- test: 测试相关
- chore: 构建过程或辅助工具的变动

## 3. 数据库规范

### 3.1 命名规范
- 表名：小写字母，单词间用下划线分隔
- 字段名：小写字母，单词间用下划线分隔
- 主键：id
- 外键：关联表名_id

### 3.2 字段规范
- 必须包含 created_at 和 updated_at
- 使用 COMMENT 说明字段用途
- 适当使用索引提高查询效率

## 4. API规范

### 4.1 RESTful API
- GET：查询
- POST：创建
- PUT：更新
- DELETE：删除

### 4.2 响应格式
```json
{
    "code": 200,
    "message": "success",
    "data": {}
}
```

### 4.3 状态码
- 200：成功
- 400：请求错误
- 401：未授权
- 403：禁止访问
- 404：资源不存在
- 500：服务器错误

## 5. 日志规范

### 5.1 日志级别
- ERROR：错误信息
- WARN：警告信息
- INFO：一般信息
- DEBUG：调试信息

### 5.2 日志格式
```
[时间] [级别] [模块] 消息
```

## 6. 安全规范

### 6.1 密码存储
- 使用加密算法存储密码
- 不在代码中硬编码敏感信息
- 使用环境变量存储配置信息

### 6.2 API安全
- 使用HTTPS
- 实现接口鉴权
- 防止SQL注入
- 防止XSS攻击 